\documentclass[letterpaper,openany,oneside,twocolumn]{book}

\usepackage[justified]{dnd}
\usepackage{ifthen}

\usepackage{dndtemplate}
\usepackage{bookmark}

\setlength\oddsidemargin{\dimexpr(\paperwidth-\textwidth)/2 - 1in\relax}
\setlength\evensidemargin{\oddsidemargin}

% Headline
\CharacterName{Grok}
\CharacterSurname{Thunderborn} % Optional surname, can be left empty
\CharacterNickname{} % Optional nickname, can be left empty

\ClassOne{6}

% adds only main class and total level to prevent overflow
\Class{Paladin (\ClassOneValue)}
% Paladin sacred oath: devotion
\Background{Soldier}
\PlayerName{Samy}
\Race{Hill Dwarf}
\Alignment{LG}
\XP{Milestone} % xp or milestone progression
\Inspiration{} % number of inspiration points


% -------------------------------
%% ABILITIES %%

% Ability scores
\StrengthScore{15}           % 6,5,4,2 = 15 
\DexterityScore{12}          % 6,4,2,1 = 12
\ConstitutionScore{18}       % 6,5,4,3 = 15 + 2 da Dwarf + 1 (dwarven fortitude)
\IntelligenceScore{9}       % 4,4,1,1 = 9 
\WisdomScore{11}             % 3,2,3,5 = 11 + 1 Hill dwarf  
\CharismaScore{15}           % 6,5,4,3 = 15

% Ability Modifiers
% The base modifier for each ability is calculated automatically from the ability scores using the formula:
%   Modifier = floor((Score - 10)/2)
% You can add an offset for racial traits, magic items, feats or other effects.
\StrengthModifier{0}       % Base calculation, no offset
\DexterityModifier{0}      % Base calculation, no offset
\ConstitutionModifier{0}   % Base calculation, no offset
\IntelligenceModifier{0}   % Base calculation, no offset
\WisdomModifier{0}         % Base calculation, no offset
\CharismaModifier{0}       % Base calculation, no offset


% -------------------------------
%% SAVING THROWS %%

% Saving Throws Proficiencies
\SetStrengthProficiency{0}
\SetDexterityProficiency{0}
\SetConstitutionProficiency{0}
\SetIntelligenceProficiency{0}
\SetWisdomProficiency{1}
\SetCharismaProficiency{1}

% The base modifier for each ability is calculated automatically from the ability scores using the formula:
%   Saving throw value = Ability modifier + Proficiency Bonus (if proficient)
% You can add an offset for racial traits, magic items, feats or other effects.
\SetStrengthSavingThrowModifier{0}      % Base calculation, no offset
\SetDexteritySavingThrowModifier{0}     % Base calculation, no offset
\SetConstitutionSavingThrowModifier{0}  % Base calculation, no offset
\SetIntelligenceSavingThrowModifier{0}  % Base calculation, no offset
\SetWisdomSavingThrowModifier{0}        % Base calculation, no offset
\SetCharismaSavingThrowModifier{0}      % Base calculation, no offset


% -------------------------------
%% SKILLS %%
% Skills Proficiencies
\SetAcrobaticsProficiency{0}           
\SetAnimalHandlingProficiency{0} 
\SetArcanaProficiency{0}
\SetAthleticsProficiency{1}         % From background soldier     
\SetDeceptionProficiency{0}            
\SetHistoryProficiency{0}
\SetInsightProficiency{0}
\SetIntimidationProficiency{1}      % From background soldier
\SetInvestigationProficiency{0}        
\SetMedicineProficiency{1}          % From paladin
\SetNatureProficiency{0}               
\SetPerceptionProficiency{1}        % Da dwarf        
\SetPerformanceProficiency{0}
\SetPersuasionProficiency{1}        % From paladin        
\SetReligionProficiency{0}
\SetSleightOfHandProficiency{0}        
\SetStealthProficiency{0}              
\SetSurvivalProficiency{0}             

% The base modifier for each ability is calculated automatically from the ability scores using the formula:
%  Skill value = Ability modifier + Proficiency Bonus (if proficient)
% You can add an offset for racial traits, magic items, feats or other effects.
\SetAcrobaticsSkillModifier{0}          % Base calculation, no offset
\SetAnimalHandlingSkillModifier{0}      % Base calculation, no offset
\SetArcanaSkillModifier{0}              % Base calculation, no offset
\SetAthleticsSkillModifier{0}           % Base calculation, no offset
\SetDeceptionSkillModifier{0}           % Base calculation, no offset
\SetHistorySkillModifier{0}             % Base calculation, no offset
\SetInsightSkillModifier{0}             % Base calculation, no offset
\SetIntimidationSkillModifier{0}        % Base calculation, no offset
\SetInvestigationSkillModifier{0}       % Base calculation, no offset
\SetMedicineSkillModifier{0}            % Base calculation, no offset
\SetNatureSkillModifier{0}              % Base calculation, no offset
\SetPerceptionSkillModifier{0}          % Base calculation, no offset
\SetPerformanceSkillModifier{0}         % Base calculation, no offset
\SetPersuasionSkillModifier{0}          % Base calculation, no offset
\SetReligionSkillModifier{0}            % Base calculation, no offset
\SetSleightOfHandSkillModifier{0}       % Base calculation, no offset
\SetStealthSkillModifier{0}             % Base calculation, no offset
\SetSurvivalSkillModifier{0}            % Base calculation, no offset

\Perception{\fpeval{10+\PerceptionSkillModifierValue}}

\ArmorClass{
    \fpeval{
        17+ % Base AC for Splint armor
        4+ % From shield
        1 % From Defense fighting style
    }
}

\Initiative{\DexterityModifierValue}

\Speed{\parbox{40pt}{\centering 7.5~m
\small{(4.5~swim)}}}

% TODO: update manually
\MaxHitPoints{    \fpeval{
            10+
            9+ % Roll lv 2
            7+ % Roll lv 3
            6+ % Roll lv 4
            9+ % Roll lv 5
            7+ % Roll lv 6
            \ConstitutionModifierValue * \LevelValue+ % Total levels
            2*\LevelValue+ % From tough feat
            \LevelValue % From Hill Dwarf
    }
}

\MaxHitDice{\ClassOneValue d10}
\CurrentHitDice{\LevelValue}

\CP{}
\SP{}
\GP{100}
\EP{}
\PP{}

% p = piercing, s = slashing, b = bludgeoning, r = radiant, f = fire, c = cold, n = necrotic, a = acid, l = lightning, t = thunder, ps = psychic, hp = healing
\AddWeapon{Long sword}{\fpeval{
    \ProficiencyValue % If proficient with the weapon
    + \StrengthModifierValue
    }}{1d8+\StrengthModifierValue
~/s}
\AddWeapon{Dagger}{\fpeval{\ProficiencyValue+\DexterityModifierValue}}{d4+
\DexterityModifierValue~/ % Because finesse weapon has dex modifier to damage
(6/18)-% Dagger has range 6/18 m, beyond 6 m you have disadvantage, you can not throw beyond 18 m
p}


\AttacksAdditional{
\textbf{Spell Name}: att. +x, dmg xdx/r\\
}

\OtherProficienciesLanguages{\textbf{Languages:} Common, Dwarvish\\ % From dwarf
\textbf{Weapons}: All weapons\\ % Paladin
\textbf{Armor}: All armor, shields\\ % Paladin
\textbf{Vehicles}: Land\\ % Soldier background
\textbf{Tools}: Dice set, Smith's tools\\ % Only proficiency
}

%% EQUIPMENT %%
% Add equipment items using the \EquipmentItem{name of the equipment}{weight}{quantity} command

\Equipment{
\textbf{Weapons}: \EquipmentItem{Long sword}{1.5}{1},\EquipmentItem{Dagger}{0.5}{2}.\\
\textbf{Armor}: \EquipmentItem{Splint armor}{30}{1}, \EquipmentItem{Shield}{9}{1}.\\
\textbf{Tools}:\\ 
\textbf{Mounts/Animals}:Mule\\
\textbf{Misc}: \EquipmentItem{Common Clothes}{1.5}{1}, % From Soldier background
\EquipmentItem{Holy symbol}{0.05}{1}, % From paladin
\EquipmentItem{Pouch}{0.5}{1}, % From Urban Bounty Hunter background
\EquipmentItem{Backpack}{2.5}{1}, % From Explorer's Pack
\EquipmentItem{Bedroll}{3.5}{1}, % From Explorer's Pack
\EquipmentItem{Mess kit}{0.5}{1}, % From Explorer's Pack
\EquipmentItem{Tinderbox}{0.5}{1}, % From Explorer's Pack
\EquipmentItem{Torches}{0.5}{10}, % From Explorer's Pack
\EquipmentItem{Rations}{1}{10}, % From Explorer's Pack
\EquipmentItem{Waterskin}{2.5}{1}, % From Explorer's Pack
\EquipmentItem{Hempen rope (15 m)}{5}{1}\\ % From Explorer's Pack
\EquipmentItem{Insignia of rank}{0.05}{1}\\ % From Soldier background
\EquipmentItem{Pouch}{0.5}{1}, % From Soldier background
\EquipmentItem{Set of bone dices}{0}{1}\\ % From Soldier background
\\
\textbf{Weight:} \EquipmentTotalWeight\ kg \\
\textbf{Capacity:} \newcommand{\Capacity}{\fpeval{
    \StrengthScoreValue*3+ % Homebrew carrying capacity formula
    210 % Mule
}}\Capacity\ kg\\
\textbf{Residual capacity:} \fpeval{\Capacity - \EquipmentTotalWeight} kg
}



\PersonalityTraits{
    He is disciplined, measured in speech, and unwavering in his duties.
}

\Ideals{
    Stability and order are the foundation of civilization and must be preserved.
}

\Bonds{
    He is sworn to the city of Neverwinter and considers its people his sacred responsibility, vowing to always fight on the front lines.
}


\Flaws{
    He obeys authority too readily and bears responsibility even when it is not his to carry.
}

\FeaturesTraits{
% Character features and traits here
\textbf{Disadvantage}: stealth, dexterity.\\ % from armour and shield
\textbf{Advantage}: poison.\\% from dwarf
\textbf{Resistance}: poison dmg, % from dwarf
 diseases. \\ % from divine health
\\
\textbf{Divine Sense}: can use \fpeval{1 + \CharismaModifierValue} times per long rest.\\
\textbf{Lay on Hands}: has \fpeval{5 * \LevelValue} HP pool, can use that pool to restore creature HP and/or 5 from that pool to heal all diseases.\\
\textbf{Extra Attack}: can attack \textbf{twice} per turn.\\
\textbf{Divine Smite}: if melee hit-> can expend spell slot to deal extra 1d8 per spell slot (e.g if spell slot is 2, are 2d8) radiant dmg on hit. If undead or fiend add 1d8.\\
\textbf{Dark vision}: 18 m.\\
\\
\\
\textbf{Stonecunning}: \textbf{expertise} in \textbf{history} checks related to \textbf{stonework}.\\
\textbf{Dwarven fortitude}: when take \textbf{dodge} action, can gain (1d10 + \ConstitutionModifierValue) HP (min 1).\\
\textbf{Champion Challenge}:\\
\textbf{Turn the Tide}:\\
\textbf{Aura of protection}:\\
}

\AdditionalFeaturesAndTraits{
    % Additional character features and traits here
}

% Appearance

\Age{xx}
\Height{1.5 m}
\Weight{75 kg}
\Eyes{xx}
\Skin{xx}
\Hair{xx}

% background

\CharacterAppearance{
\includegraphics[width=5.75cm]{images/grok.png}
}



\Characterbackground{
    Raised in service to the crown, he spent his youth immersed in the strict disciplines of military and civic duty, learning that law, honor, and loyalty are more than idealsâ€”they are the foundation upon which civilization stands. From early training in the barracks and city halls of Neverwinter, he was taught that personal desires must always yield to the greater needs of the city, and that a single oath carries the weight of countless lives. Swearing his allegiance not to a deity, but to the city itself, he came to believe that order is the true shield that protects the innocent, and that a city can only endure when its leaders act with both resolve and foresight.\\

    He now serves as both enforcer and guardian of the sovereign's will, frequently taking on missions that lie beyond the reach of courts, councils, and bureaucrats. Whether quelling unrest in the streets or ensuring that justice is carried out where the law falters, he acts decisively, guided by the conviction that the stability of Neverwinter depends on those willing to act where others hesitate.\\

    A past failure, one that resulted in the loss of lives under his temporary command, left an indelible mark upon him. Though offered promotion to a higher rank, he declined, believing that a true commander must face danger alongside their soldiers rather than directing them from a distance. Now he fights as a frontline officer, sharing the risks of every mission with those he leads, convinced that courage and leadership are inseparable, and that a commander earns authority through presence and example.
}

\Treasure{
    % Character treasure here
}

\AlliesAndOrganizations{
    % Character allies and organizations here
    Infantry officer of the Neverwinter army.
}

\OrganizationName{
    % Organization name here
    Neverwinter Army
}
\OrganizationSymbol{
    \includegraphics[width=4.9cm,height=3.9cm]{images/Neverwinter_symbol}
}


%Magic
\SpellcastingClass{Paladin}
\SpellcastingAbility{CHAR}
\SpellSaveDC{\fpeval{8+\ProficiencyValue+\CharismaModifierValue}}
\SpellAttackBonus{\fpeval{\ProficiencyValue+\CharismaModifierValue}}


\CantripSlotA{}
\CantripSlotB{}
\CantripSlotC{}
\CantripSlotD{}


\FirstLevelSpellSlotsTotal{4}

\FirstLevelSpellSlotA{Command} % from oath of the crown
\FirstLevelSpellSlotAPrepared{True}
\FirstLevelSpellSlotB{Compelled Duel}
\FirstLevelSpellSlotBPrepared{True}
\FirstLevelSpellSlotC{Choose \fpeval{\CharismaModifierValue + (floor(\LevelValue/2))} prepared paladin spells x long rest}
\FirstLevelSpellSlotCPrepared{}
\FirstLevelSpellSlotD{}
\FirstLevelSpellSlotDPrepared{}
\FirstLevelSpellSlotE{}
\FirstLevelSpellSlotEPrepared{}

\SecondLevelSpellSlotsTotal{2}
\SecondLevelSpellSlotA{Warding Bond}
\SecondLevelSpellSlotAPrepared{True}
\SecondLevelSpellSlotB{Zone of Truth}
\SecondLevelSpellSlotBPrepared{True}
\SecondLevelSpellSlotC{Choose \fpeval{\CharismaModifierValue + (floor(\LevelValue/2))} prepared paladin spells x long rest}
\SecondLevelSpellSlotCPrepared{}
\SecondLevelSpellSlotD{}
\SecondLevelSpellSlotDPrepared{}
\SecondLevelSpellSlotE{}
\SecondLevelSpellSlotEPrepared{}

\ThirdLevelSpellSlotsTotal{}
\ThirdLevelSpellSlotA{}
\ThirdLevelSpellSlotAPrepared{}
\ThirdLevelSpellSlotB{}
\ThirdLevelSpellSlotBPrepared{}
\ThirdLevelSpellSlotC{}
\ThirdLevelSpellSlotCPrepared{}
\ThirdLevelSpellSlotD{}
\ThirdLevelSpellSlotDPrepared{}
\ThirdLevelSpellSlotE{}
\ThirdLevelSpellSlotEPrepared{}

\FourthLevelSpellSlotsTotal{}
\FourthLevelSpellSlotA{}
\FourthLevelSpellSlotAPrepared{}
\FourthLevelSpellSlotB{}
\FourthLevelSpellSlotBPrepared{}
\FourthLevelSpellSlotC{}
\FourthLevelSpellSlotCPrepared{}
\FourthLevelSpellSlotD{}
\FourthLevelSpellSlotDPrepared{}
\FourthLevelSpellSlotE{}
\FourthLevelSpellSlotEPrepared{}

\FifthLevelSpellSlotsTotal{}
\FifthLevelSpellSlotA{}
\FifthLevelSpellSlotAPrepared{}
\FifthLevelSpellSlotB{}
\FifthLevelSpellSlotBPrepared{}
\FifthLevelSpellSlotC{}
\FifthLevelSpellSlotCPrepared{}
\FifthLevelSpellSlotD{}
\FifthLevelSpellSlotDPrepared{}
\FifthLevelSpellSlotE{}
\FifthLevelSpellSlotEPrepared{}

\SixthLevelSpellSlotsTotal{}
\SixthLevelSpellSlotA{}
\SixthLevelSpellSlotAPrepared{}
\SixthLevelSpellSlotB{}
\SixthLevelSpellSlotBPrepared{}
\SixthLevelSpellSlotC{}
\SixthLevelSpellSlotCPrepared{}
\SixthLevelSpellSlotD{}
\SixthLevelSpellSlotDPrepared{}
\SixthLevelSpellSlotE{}
\SixthLevelSpellSlotEPrepared{}

\SeventhLevelSpellSlotsTotal{}
\SeventhLevelSpellSlotA{}
\SeventhLevelSpellSlotAPrepared{}
\SeventhLevelSpellSlotB{}
\SeventhLevelSpellSlotBPrepared{}
\SeventhLevelSpellSlotC{}
\SeventhLevelSpellSlotCPrepared{}
\SeventhLevelSpellSlotD{}
\SeventhLevelSpellSlotDPrepared{}
\SeventhLevelSpellSlotE{}
\SeventhLevelSpellSlotEPrepared{}

\EighthLevelSpellSlotsTotal{}
\EighthLevelSpellSlotA{}
\EighthLevelSpellSlotAPrepared{}
\EighthLevelSpellSlotB{}
\EighthLevelSpellSlotBPrepared{}
\EighthLevelSpellSlotC{}
\EighthLevelSpellSlotCPrepared{}
\EighthLevelSpellSlotD{}
\EighthLevelSpellSlotDPrepared{}
\EighthLevelSpellSlotE{}
\EighthLevelSpellSlotEPrepared{}

\NinthLevelSpellSlotsTotal{}
\NinthLevelSpellSlotA{}
\NinthLevelSpellSlotAPrepared{}
\NinthLevelSpellSlotB{}
\NinthLevelSpellSlotBPrepared{}
\NinthLevelSpellSlotC{}
\NinthLevelSpellSlotCPrepared{}
\NinthLevelSpellSlotD{}
\NinthLevelSpellSlotDPrepared{}
\NinthLevelSpellSlotE{}
\NinthLevelSpellSlotEPrepared{}


\newcommand{\spellsheetchoice}{\renderspellsheet}


\begin{document}
\newgeometry{left=0cm,right=0cm,top=0cm,bottom=0cm}
\onecolumn


% CHARACTER PAGE
\pdfbookmark[0]{Character Sheet}{Character Sheet}
\rendercharactersheet

% BACKSTORY PAGE
\pdfbookmark[0]{Background Sheet}{Background Sheet}
\renderbackgroundsheet


% SPELLCASTING PAGE
\pdfbookmark[0]{Spellcasting Sheet}{Spellcasting Sheet}
\spellsheetchoice

% Character full background, or comment out if not needed
\newpage
\section{Full Character Background of \CharacterFullNameValue}
    % Character full background here

\end{document}
